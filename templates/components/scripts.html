<!-- Unified Scripts Component for Arabic VoC Platform -->
<!-- Created: June 23, 2025 -->

<!-- Bootstrap JavaScript (Unified Version) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Chart.js for Data Visualization (if needed) -->
{% if include_charts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
{% endif %}

<!-- Main Application JavaScript -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

<!-- Persistent Feedback Widget JavaScript -->
<script src="{{ url_for('static', filename='js/feedback-widget.js') }}"></script>

<!-- Fix dropdown initialization -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Bootstrap components
    if (typeof bootstrap !== 'undefined') {
        // Initialize dropdowns
        var dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'));
        var dropdownList = dropdownElementList.map(function (dropdownToggleEl) {
            return new bootstrap.Dropdown(dropdownToggleEl);
        });
        
        // Initialize tooltips if they exist
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    }
});
</script>

<!-- Feedback Widget Initialization (for authenticated users) -->
{% if current_user.is_authenticated %}
{% include 'components/feedback_widget.html' %}
{% endif %}

<!-- Page-specific JavaScript can be added via blocks in individual templates -->