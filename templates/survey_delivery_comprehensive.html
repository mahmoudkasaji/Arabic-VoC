<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    {% include 'components/head.html' %}
    <title>نظام التوزيع الشامل - منصة صوت العميل العربية</title>
</head>
<body>
    {% include 'components/navigation.html' %}
    
    <div class="container-custom">
        <!-- Page Header -->
        <div class="page-header">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h1>
                        <i class="fas fa-broadcast-tower me-3 text-primary-custom"></i>
                        نظام التوزيع الشامل متعدد القنوات
                    </h1>
                    <p class="text-muted">إنشاء وإدارة حملات الاستطلاعات عبر البريد الإلكتروني والرسائل النصية وواتساب والويب</p>
                </div>
                <div class="text-end">
                    <button class="btn btn-primary-custom btn-lg me-2" onclick="createNewCampaign()">
                        <i class="fas fa-plus me-2"></i>إنشاء حملة جديدة
                    </button>
                    <button class="btn btn-outline-secondary" onclick="viewTemplates()">
                        <i class="fas fa-templates me-2"></i>إدارة القوالب
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Stats Dashboard -->
        <div class="row mb-4">
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="metric-card bg-primary-custom">
                    <div class="metric-icon">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value">1,247</div>
                        <div class="metric-label">استطلاعات مرسلة</div>
                        <div class="metric-trend">
                            <i class="fas fa-arrow-up"></i> +12% من الشهر الماضي
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="metric-card bg-success-custom">
                    <div class="metric-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value">68.5%</div>
                        <div class="metric-label">معدل الاستجابة</div>
                        <div class="metric-trend">
                            <i class="fas fa-arrow-up"></i> +5.2% من الأسبوع الماضي
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="metric-card bg-warning-custom">
                    <div class="metric-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value">2.3 دقيقة</div>
                        <div class="metric-label">متوسط وقت الإكمال</div>
                        <div class="metric-trend">
                            <i class="fas fa-arrow-down"></i> تحسن بـ 30 ثانية
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="metric-card bg-info-custom">
                    <div class="metric-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value">15,432</div>
                        <div class="metric-label">جهات اتصال نشطة</div>
                        <div class="metric-trend">
                            <i class="fas fa-arrow-up"></i> +234 جديد هذا الأسبوع
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delivery Channels Section -->
        <div class="row mb-5">
            <div class="col-12">
                <h2 class="section-title mb-4">
                    <i class="fas fa-route me-2"></i>
                    قنوات التوزيع المتاحة
                </h2>
            </div>
            
            <!-- Email Channel -->
            <div class="col-lg-6 mb-4">
                <div class="channel-card">
                    <div class="channel-header">
                        <div class="channel-icon bg-primary-custom">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="channel-info">
                            <h3>البريد الإلكتروني</h3>
                            <p>حملات احترافية مع تتبع متقدم</p>
                        </div>
                        <div class="channel-status">
                            <span class="status-badge status-active">نشط</span>
                        </div>
                    </div>
                    
                    <div class="channel-features">
                        <ul class="feature-list">
                            <li><i class="fas fa-check text-success-custom me-2"></i>قوالب بريد إلكتروني احترافية</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>تخصيص المحتوى والتصميم</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>تتبع معدلات الفتح والنقر</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>جدولة الإرسال المتقدمة</li>
                        </ul>
                    </div>
                    
                    <div class="channel-actions">
                        <button class="btn btn-primary-custom me-2" onclick="setupEmailCampaign()">
                            <i class="fas fa-cog me-2"></i>إعداد حملة
                        </button>
                        <button class="btn btn-outline-primary-custom" onclick="viewEmailTemplates()">
                            <i class="fas fa-eye me-2"></i>عرض القوالب
                        </button>
                    </div>
                    
                    <div class="channel-stats">
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="stat-value">342</div>
                                <div class="stat-label">مرسل اليوم</div>
                            </div>
                            <div class="col-4">
                                <div class="stat-value">72%</div>
                                <div class="stat-label">معدل الفتح</div>
                            </div>
                            <div class="col-4">
                                <div class="stat-value">34%</div>
                                <div class="stat-label">معدل النقر</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SMS Channel -->
            <div class="col-lg-6 mb-4">
                <div class="channel-card">
                    <div class="channel-header">
                        <div class="channel-icon bg-success-custom">
                            <i class="fas fa-sms"></i>
                        </div>
                        <div class="channel-info">
                            <h3>الرسائل النصية</h3>
                            <p>وصول فوري مع معدلات قراءة عالية</p>
                        </div>
                        <div class="channel-status">
                            <span class="status-badge status-active">نشط</span>
                        </div>
                    </div>
                    
                    <div class="channel-features">
                        <ul class="feature-list">
                            <li><i class="fas fa-check text-success-custom me-2"></i>رسائل مختصرة وفعالة</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>روابط مختصرة للاستطلاعات</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>تتبع حالة التسليم</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>إدارة إلغاء الاشتراك</li>
                        </ul>
                    </div>
                    
                    <div class="channel-actions">
                        <button class="btn btn-success-custom me-2" onclick="setupSMSCampaign()">
                            <i class="fas fa-cog me-2"></i>إعداد حملة
                        </button>
                        <button class="btn btn-outline-success-custom" onclick="viewSMSTemplates()">
                            <i class="fas fa-eye me-2"></i>عرض القوالب
                        </button>
                    </div>
                    
                    <div class="channel-stats">
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="stat-value">156</div>
                                <div class="stat-label">مرسل اليوم</div>
                            </div>
                            <div class="col-4">
                                <div class="stat-value">98%</div>
                                <div class="stat-label">معدل التسليم</div>
                            </div>
                            <div class="col-4">
                                <div class="stat-value">45%</div>
                                <div class="stat-label">معدل النقر</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- WhatsApp Channel -->
            <div class="col-lg-6 mb-4">
                <div class="channel-card">
                    <div class="channel-header">
                        <div class="channel-icon bg-success" style="background-color: #25D366 !important;">
                            <i class="fab fa-whatsapp"></i>
                        </div>
                        <div class="channel-info">
                            <h3>واتساب بيزنس</h3>
                            <p>تفاعل مباشر مع دعم الوسائط</p>
                        </div>
                        <div class="channel-status">
                            <span class="status-badge status-setup">قيد الإعداد</span>
                        </div>
                    </div>
                    
                    <div class="channel-features">
                        <ul class="feature-list">
                            <li><i class="fas fa-check text-success-custom me-2"></i>قوالب رسائل معتمدة</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>دعم الصور والملفات</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>استطلاعات تفاعلية</li>
                            <li><i class="fas fa-clock text-warning me-2"></i>قوائم البث المستهدفة</li>
                        </ul>
                    </div>
                    
                    <div class="channel-actions">
                        <button class="btn btn-outline-primary" onclick="setupWhatsApp()">
                            <i class="fas fa-cog me-2"></i>إعداد الاتصال
                        </button>
                        <button class="btn btn-outline-secondary" disabled>
                            <i class="fas fa-eye me-2"></i>عرض القوالب
                        </button>
                    </div>
                    
                    <div class="channel-stats">
                        <div class="text-center text-muted">
                            <i class="fas fa-info-circle me-2"></i>
                            يتطلب إعداد واتساب بيزنس API
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Web Survey Channel -->
            <div class="col-lg-6 mb-4">
                <div class="channel-card">
                    <div class="channel-header">
                        <div class="channel-icon bg-info-custom">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="channel-info">
                            <h3>الويب ورموز QR</h3>
                            <p>استطلاعات مستضافة مع روابط مباشرة</p>
                        </div>
                        <div class="channel-status">
                            <span class="status-badge status-active">نشط</span>
                        </div>
                    </div>
                    
                    <div class="channel-features">
                        <ul class="feature-list">
                            <li><i class="fas fa-check text-success-custom me-2"></i>روابط مخصصة ومحمية</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>رموز QR قابلة للطباعة</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>تصميم متجاوب للهواتف</li>
                            <li><i class="fas fa-check text-success-custom me-2"></i>تحكم في الوصول والمدة</li>
                        </ul>
                    </div>
                    
                    <div class="channel-actions">
                        <button class="btn btn-info-custom me-2" onclick="createWebSurvey()">
                            <i class="fas fa-link me-2"></i>إنشاء رابط
                        </button>
                        <button class="btn btn-outline-info-custom" onclick="generateQR()">
                            <i class="fas fa-qrcode me-2"></i>إنشاء QR
                        </button>
                    </div>
                    
                    <div class="channel-stats">
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="stat-value">89</div>
                                <div class="stat-label">زائر اليوم</div>
                            </div>
                            <div class="col-4">
                                <div class="stat-value">67%</div>
                                <div class="stat-label">معدل الإكمال</div>
                            </div>
                            <div class="col-4">
                                <div class="stat-value">3.2</div>
                                <div class="stat-label">دقائق متوسط</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Campaign Management Section -->
        <div class="card-custom mb-4">
            <div class="card-header-custom">
                <h3 class="card-title">
                    <i class="fas fa-tasks me-2"></i>
                    إدارة الحملات النشطة
                </h3>
                <div class="card-actions">
                    <button class="btn btn-outline-primary-custom btn-sm" onclick="refreshCampaigns()">
                        <i class="fas fa-sync me-2"></i>تحديث
                    </button>
                </div>
            </div>
            
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>اسم الحملة</th>
                            <th>القناة</th>
                            <th>الحالة</th>
                            <th>المرسل</th>
                            <th>الاستجابات</th>
                            <th>معدل النجاح</th>
                            <th>الإجراءات</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <strong>استطلاع رضا العملاء - أكتوبر</strong>
                                <br><small class="text-muted">تم الإنشاء في 20 أكتوبر</small>
                            </td>
                            <td>
                                <span class="badge bg-primary-custom">
                                    <i class="fas fa-envelope me-1"></i>بريد إلكتروني
                                </span>
                            </td>
                            <td>
                                <span class="badge bg-success">نشط</span>
                            </td>
                            <td>1,247</td>
                            <td>856</td>
                            <td>68.6%</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary-custom me-1" onclick="viewCampaign(1)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary me-1" onclick="editCampaign(1)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger" onclick="pauseCampaign(1)">
                                    <i class="fas fa-pause"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>استطلاع المنتج الجديد</strong>
                                <br><small class="text-muted">تم الإنشاء في 18 أكتوبر</small>
                            </td>
                            <td>
                                <span class="badge bg-success-custom">
                                    <i class="fas fa-sms me-1"></i>رسائل نصية
                                </span>
                            </td>
                            <td>
                                <span class="badge bg-warning">مجدول</span>
                            </td>
                            <td>0 / 500</td>
                            <td>0</td>
                            <td>-</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary-custom me-1" onclick="viewCampaign(2)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary me-1" onclick="editCampaign(2)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-success" onclick="startCampaign(2)">
                                    <i class="fas fa-play"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row">
            <div class="col-md-4 mb-3">
                <div class="quick-action-card" onclick="window.location.href='/surveys/builder'">
                    <i class="fas fa-plus-circle text-primary-custom mb-3"></i>
                    <h4>إنشاء استطلاع جديد</h4>
                    <p>ابدأ بإنشاء استطلاع باستخدام منشئ الاستطلاعات</p>
                </div>
            </div>
            
            <div class="col-md-4 mb-3">
                <div class="quick-action-card" onclick="window.location.href='/analytics/executive'">
                    <i class="fas fa-chart-line text-success-custom mb-3"></i>
                    <h4>عرض التحليلات</h4>
                    <p>اطلع على أداء الحملات والاستجابات</p>
                </div>
            </div>
            
            <div class="col-md-4 mb-3">
                <div class="quick-action-card" onclick="manageContacts()">
                    <i class="fas fa-users text-info-custom mb-3"></i>
                    <h4>إدارة جهات الاتصال</h4>
                    <p>تنظيم قوائم العملاء والمجموعات المستهدفة</p>
                </div>
            </div>
        </div>
    </div>

    {% include 'components/scripts.html' %}
    
    <script>
    // Campaign Management Functions
    function createNewCampaign() {
        // Would redirect to campaign creation wizard
        alert('سيتم توجيهك إلى معالج إنشاء الحملات');
    }
    
    function setupEmailCampaign() {
        alert('إعداد حملة البريد الإلكتروني - سيتم تطوير هذه الميزة');
    }
    
    function setupSMSCampaign() {
        alert('إعداد حملة الرسائل النصية - يتطلب اتصال Twilio');
    }
    
    function createWebSurvey() {
        // Generate a sample survey link
        const surveyId = 'survey_' + Math.random().toString(36).substr(2, 9);
        const surveyLink = window.location.origin + '/survey/' + surveyId;
        
        alert('رابط الاستطلاع تم إنشاؤه:\\n' + surveyLink + '\\n\\nيمكنك مشاركة هذا الرابط عبر أي قناة');
    }
    
    function generateQR() {
        alert('سيتم إنشاء رمز QR للاستطلاع - ميزة قيد التطوير');
    }
    
    function viewCampaign(id) {
        alert('عرض تفاصيل الحملة #' + id);
    }
    
    function editCampaign(id) {
        alert('تحرير الحملة #' + id);
    }
    
    function pauseCampaign(id) {
        if(confirm('هل تريد إيقاف الحملة مؤقتاً؟')) {
            alert('تم إيقاف الحملة #' + id + ' مؤقتاً');
        }
    }
    
    function startCampaign(id) {
        if(confirm('هل تريد بدء الحملة الآن؟')) {
            alert('تم بدء الحملة #' + id);
        }
    }
    </script>
</body>
</html>