<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة صوت العميل العربية</title>

    <!-- Bootstrap RTL CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

    <!-- Arabic Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Internationalization System -->
    <script src="/static/js/i18n.js"></script>

    <style>
        :root {
            --primary-color: #2E8B57;
            --secondary-color: #F4A460;
            --accent-color: #4169E1;
            --text-color: #2c3e50;
            --bg-color: #f8f9fa;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: var(--text-color);
            direction: rtl;
            text-align: right;
            min-height: 100vh;
        }

        .arabic-title {
            font-family: 'Amiri', serif;
            font-weight: 700;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--primary-color) !important;
        }

        .hero-section {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            margin: 2rem 0;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .btn-auth {
            background: var(--primary-color);
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-auth:hover {
            background: #236B47;
            color: white;
            transform: translateY(-2px);
        }

        .user-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .lang-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: white;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            font-weight: 600;
        }

        .lang-toggle:hover {
            background: var(--primary-color);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Language Toggle -->
    <button class="btn lang-toggle" onclick="toggleLanguage()">
        <span id="langText">English</span>
    </button>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand arabic-title" href="/">
                <i class="fas fa-comments me-2"></i>
                <span data-i18n="platform.title">منصة صوت العميل العربية</span>
            </a>
            <div class="navbar-nav ms-auto">
                {% if user %}
                    <span class="nav-link">مرحباً {{ user.first_name or 'مستخدم' }}</span>
                    <a href="{{ url_for('dashboard') }}" class="nav-link" data-i18n="nav.dashboard">لوحة التحكم</a>
                    <a href="{{ url_for('analytics') }}" class="nav-link" data-i18n="nav.analytics">التحليلات</a>
                    <a href="{{ url_for('surveys') }}" class="nav-link" data-i18n="nav.surveys">الاستطلاعات</a>
                    <a href="{{ url_for('replit_auth.logout') }}" class="btn btn-outline-danger">
                        <i class="fas fa-sign-out-alt me-1"></i>
                        تسجيل الخروج
                    </a>
                {% else %}
                    <a href="{{ url_for('feedback_page') }}" class="nav-link" data-i18n="nav.feedback">إرسال تعليق</a>
                    <a href="{{ url_for('replit_auth.login') }}" class="btn btn-auth">
                        <i class="fas fa-sign-in-alt me-1"></i>
                        <span data-i18n="nav.login">تسجيل الدخول</span>
                    </a>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        {% if user %}
            <!-- Authenticated User Dashboard -->
            <div class="hero-section">
                <div class="row">
                    <div class="col-md-8">
                        <h1 class="arabic-title display-4 mb-4">
                            مرحباً {{ user.first_name or 'مستخدم' }}!
                        </h1>
                        <p class="lead">
                            مرحباً بك في منصة صوت العميل العربية المتقدمة
                        </p>
                        <div class="user-info">
                            <h5>معلومات الحساب:</h5>
                            <p><i class="fas fa-envelope me-2"></i> {{ user.email }}</p>
                            <p><i class="fas fa-user me-2"></i> {{ user.first_name }} {{ user.last_name }}</p>
                        </div>
                    </div>
                    <div class="col-md-4 text-center">
                        {% if user.profile_image_url %}
                            <img src="{{ user.profile_image_url }}" alt="Profile" class="rounded-circle" width="150">
                        {% else %}
                            <i class="fas fa-user-circle fa-10x text-primary"></i>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="row">
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <i class="fas fa-chart-line fa-3x text-primary mb-3"></i>
                        <h4>لوحة التحليلات</h4>
                        <p>عرض تحليلات شاملة لآراء العملاء</p>
                        <a href="{{ url_for('analytics') }}" class="btn btn-auth">عرض التحليلات</a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <i class="fas fa-tachometer-alt fa-3x text-success mb-3"></i>
                        <h4>التحليلات المباشرة</h4>
                        <p>متابعة البيانات في الوقت الفعلي</p>
                        <a href="{{ url_for('dashboard') }}" class="btn btn-auth">لوحة التحكم</a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <i class="fas fa-poll fa-3x text-info mb-3"></i>
                        <h4>الاستطلاعات</h4>
                        <p>إنشاء وإدارة الاستطلاعات</p>
                        <a href="{{ url_for('surveys') }}" class="btn btn-auth">الاستطلاعات</a>
                    </div>
                </div>
            </div>
        {% else %}
            <!-- Landing Page for Non-authenticated Users -->
            <div class="hero-section text-center">
                <h1 class="arabic-title display-4 mb-4">
                    <span data-i18n="platform.welcome">مرحباً بك في منصة صوت العميل العربية</span>
                </h1>
                <p class="lead mb-4">
                    <span data-i18n="platform.description">منصة متطورة لجمع وتحليل آراء العملاء باللغة العربية مع ذكاء اصطناعي متقدم</span>
                </p>
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <a href="{{ url_for('replit_auth.login') }}" class="btn btn-auth btn-lg me-3">
                            <i class="fas fa-rocket me-2"></i>
                            <span data-i18n="cta.start">ابدأ الآن</span>
                        </a>
                        <a href="{{ url_for('feedback_page') }}" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-comment me-2"></i>
                            <span data-i18n="cta.feedback">شارك رأيك</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Features -->
            <div class="row">
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <i class="fas fa-brain fa-3x text-primary mb-3"></i>
                        <h4 data-i18n="features.ai.title">ذكاء اصطناعي متقدم</h4>
                        <p data-i18n="features.ai.description">تحليل ذكي للمشاعر والآراء باللغة العربية مع فهم اللهجات المختلفة</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <i class="fas fa-chart-line fa-3x text-success mb-3"></i>
                        <h4 data-i18n="features.analytics.title">تحليلات فورية</h4>
                        <p data-i18n="features.analytics.description">لوحة تحكم متقدمة مع تحليلات فورية ورؤى عميقة حول آراء العملاء</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card text-center">
                        <i class="fas fa-globe fa-3x text-info mb-3"></i>
                        <h4 data-i18n="features.multichannel.title">متعدد القنوات</h4>
                        <p data-i18n="features.multichannel.description">جمع الآراء من قنوات متعددة: الموقع، التطبيق، واتساب، والمزيد</p>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script>
        // Initialize language system
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof LanguageManager !== 'undefined') {
                window.langManager = new LanguageManager();
                window.langManager.init();
            }
        });

        // Language toggle function
        function toggleLanguage() {
            if (window.langManager) {
                window.langManager.toggleLanguage();
            }
        }
    </script>
</body>
</html>