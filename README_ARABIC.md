# منصة صوت العميل

## ما تفعله هذه المنصة

منصة تعليقات العملاء ثنائية اللغة (العربية/الإنجليزية) التي:
- تنشئ وتوزع الاستطلاعات عبر قنوات متعددة (الويب، البريد الإلكتروني، الرسائل النصية)
- تحلل التعليقات باستخدام الذكاء الاصطناعي لتحليل المشاعر والرؤى
- توفر لوحات معلومات تحليلية في الوقت الفعلي
- تدعم معالجة النصوص العربية مع واجهة RTL

**المستخدمون المستهدفون**: الشركات في الأسواق الناطقة بالعربية التي تجمع تعليقات العملاء

## البدء السريع للمطورين الجدد

### 1. إعداد البيئة
```bash
# هذا التطبيق يعمل على Replit - فقط اضغط "Run"
# التبعيات تثبت تلقائياً عبر pyproject.toml
```

### 2. مفاتيح API المطلوبة (أضفها إلى Replit Secrets)
```
OPENAI_API_KEY=your-openai-key     # مطلوب لتحليل الذكاء الاصطناعي
SESSION_SECRET=your-session-key    # مطلوب للأمان
TWILIO_ACCOUNT_SID=اختياري         # لاستطلاعات الرسائل النصية
TWILIO_AUTH_TOKEN=اختياري          # لاستطلاعات الرسائل النصية
```

### 3. الوصول للتطبيق
- التطبيق الرئيسي: `http://0.0.0.0:5000`
- تسجيل الدخول: اضغط على أيقونة الكرة الأرضية لتبديل اللغات
- اختبار إنشاء الاستطلاع: `/surveys/create`

## كيفية إجراء التغييرات

### إضافة ميزات جديدة
1. **الواجهة الأمامية**: عدّل القوالب في مجلد `/templates/`
2. **منطق الخلفية**: أضف routes في `app.py` للميزات البسيطة، `/api/` للمعقدة
3. **الترجمات**: حديث كلاً من `/translations/ar.json` و `/translations/en.json`
4. **قاعدة البيانات**: عدّل النماذج في `models_unified.py`

### اختبار التغييرات
```bash
# شغّل التطبيق واختبر يدوياً
# تحقق من console المتصفح للأخطاء في JavaScript
# اختبر كلاً من الواجهات العربية والإنجليزية
```

## الملفات الرئيسية التي يجب معرفتها

```
├── app.py                     # التطبيق الرئيسي مع جميع الـ routes
├── main.py                    # نقطة الدخول (لا تعدّل)
├── models_unified.py          # مخطط قاعدة البيانات
├── utils/
│   ├── language_manager.py    # يتعامل مع التبديل بين العربية/الإنجليزية
│   └── simple_arabic_analyzer.py  # محرك التحليل بالذكاء الاصطناعي
├── templates/                 # قوالب HTML
│   ├── index_simple.html      # الصفحة الرئيسية
│   └── components/            # قطع واجهة المستخدم القابلة لإعادة الاستخدام
├── static/
│   ├── js/main.js            # منطق تبديل اللغة
│   └── css/                   # التنسيق
└── translations/
    ├── ar.json               # النص العربي
    └── en.json               # النص الإنجليزي
```

## المهام التطويرية الشائعة

### إضافة صفحة جديدة
1. أنشئ قالب في `/templates/your_page.html`
2. أضف route في `app.py`:
```python
@app.route('/your-page')
def your_page():
    return render_template('your_page.html')
```
3. أضف رابط التنقل في `/templates/components/unified_navigation.html`
4. أضف الترجمات إلى ملفي اللغة

### إضافة نص ترجمة جديد
1. عدّل `/translations/ar.json` و `/translations/en.json`
2. استخدم في القوالب: `{{ 'your.translation.key' | translate }}`
3. اختبر أن تبديل اللغة يعمل

### تعديل قاعدة البيانات
1. عدّل النماذج في `models_unified.py`
2. قاعدة البيانات تنشئ الجداول تلقائياً عند إعادة التشغيل
3. للتغييرات المعقدة، فكر في migration البيانات

## نظرة عامة على البنية

**الواجهة الأمامية**: قوالب Jinja2 مع Bootstrap CSS، دعم ثنائي اللغة
**الخلفية**: Flask مع نهج مختلط - routes بسيطة للميزات الأساسية، API blueprints للتحليلات المعقدة
**قاعدة البيانات**: PostgreSQL مع تحسين النص العربي
**الذكاء الاصطناعي**: تكامل OpenAI GPT-4o لتحليل المشاعر العربية
**المصادقة**: Replit OAuth (تلقائي في بيئة Replit)

### كيف يعمل النظام ثنائي اللغة
- لغة المستخدم محفوظة في جلسة Flask
- `/utils/language_manager.py` يتعامل مع اكتشاف اللغة والتبديل
- القوالب تستخدم `{{ 'key' | translate }}` لجميع النصوص
- JavaScript يتزامن مع حالة اللغة في الخادم
- اضغط أيقونة الكرة الأرضية في التنقل لتبديل اللغات

## المشاكل الشائعة والحلول

### اللغة لا تتبدل
- تحقق من console المتصفح لأخطاء JavaScript
- تأكد من وجود الترجمات في كلا `/translations/ar.json` و `/translations/en.json`
- امسح cache المتصفح وأعد التحميل

### أخطاء قاعدة البيانات
- قاعدة البيانات تعيد الإنشاء تلقائياً عند إعادة التشغيل
- تحقق من `models_unified.py` لتعريفات النماذج
- متغير البيئة `DATABASE_URL` يوفر تلقائياً بواسطة Replit

### تحليل الذكاء الاصطناعي لا يعمل
- تأكد من تعيين `OPENAI_API_KEY` في Replit Secrets
- تحقق من `/utils/simple_arabic_analyzer.py` لسجلات الأخطاء
- اختبر بنص عربي بسيط أولاً

### مشاكل التنسيق
- CSS الرئيسي في `/static/css/unified-layout.css`
- Bootstrap RTL CSS يحمّل تلقائياً للعربية
- استخدم أدوات تطوير المتصفح لتنقيح تعارضات CSS

## النشر

**التطوير**: فقط اضغط "Run" في Replit
**الإنتاج**: استخدم نشر Replit (اضغط زر Deploy)

التطبيق محسّن لبيئة Replit ويتعامل مع معالجة النص العربي تلقائياً.

## الحصول على المساعدة

1. تحقق من هذا README أولاً
2. انظر إلى كود مشابه موجود في التطبيق
3. اختبر التغييرات في خطوات صغيرة
4. استخدم أدوات تطوير المتصفح لتنقيح الواجهة الأمامية

## ما يجعل هذا التطبيق مميزاً

- **دعم عربي أصلي**: واجهة RTL كاملة مع معالجة نص صحيحة
- **ثنائي اللغة**: تبديل سلس بين العربية والإنجليزية في كل مكان
- **مدعوم بالذكاء الاصطناعي**: يفهم اللهجات العربية والسياق الثقافي
- **متعدد القنوات**: استطلاعات عبر الويب، البريد الإلكتروني، الرسائل النصية، رموز QR
- **الوقت الفعلي**: تحليلات مباشرة وتحديثات لوحة المعلومات

## لأصحاب المصلحة

هذه المنصة تساعد الشركات في الأسواق العربية على فهم عملائها بشكل أفضل من خلال:
- إنشاء وتوزيع استطلاعات احترافية
- تحليل مدعوم بالذكاء الاصطناعي للتعليقات العربية
- لوحات معلومات في الوقت الفعلي تظهر اتجاهات رضا العملاء
- توصيل متعدد القنوات يضمن وصولاً واسعاً

التكنولوجيا حديثة وقابلة للتوسع ومصممة خصيصاً للأسواق الناطقة بالعربية.