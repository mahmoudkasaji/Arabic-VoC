# منصة صوت العميل
## نظام تحليل التعليقات ثنائي اللغة على مستوى المؤسسات

### 🚀 نظرة عامة على المنصة

منصة شاملة **لتعليقات العملاء بالعربية والإنجليزية** مصممة للمؤسسات الكبيرة:

- **توزيع الاستطلاعات متعدد القنوات**: نماذج الويب، حملات البريد الإلكتروني، إشعارات الرسائل النصية، والودجت القابلة للتضمين
- **التحليل المتقدم بالذكاء الاصطناعي**: تحليل المشاعر مدعوم بـ GPT-4o مع فهم السياق الثقافي العربي
- **التحليلات في الوقت الفعلي**: لوحات معلومات مباشرة مع تتبع مؤشرات الأداء الرئيسية، والرؤى التنبؤية، والتقارير المهنية
- **الدعم الأصلي للعربية**: واجهة RTL كاملة، ومعالجة النصوص العربية، وفهم اللهجة الشامية
- **أمان المؤسسات**: مصادقة Replit OAuth 2.0 + PKCE مع التحكم في الوصول القائم على الأدوار
- **بنية قابلة للتوسع**: تصميم مؤسسي من 6 طبقات مع قاعدة بيانات PostgreSQL ونشر ذاتي التوسع

**السوق المستهدف**: الشركات الكبيرة في منطقة الشرق الأوسط وشمال أفريقيا التي تجمع تعليقات العملاء على نطاق واسع

## البدء السريع للمطورين الجدد

### 1. إعداد البيئة
```bash
# هذا التطبيق يعمل على Replit - فقط اضغط "Run"
# التبعيات تثبت تلقائياً عبر pyproject.toml
```

### 2. مفاتيح API المطلوبة (أضفها إلى Replit Secrets)
```
OPENAI_API_KEY=your-openai-key     # مطلوب لتحليل الذكاء الاصطناعي
SESSION_SECRET=your-session-key    # مطلوب للأمان
TWILIO_ACCOUNT_SID=اختياري         # لاستطلاعات الرسائل النصية
TWILIO_AUTH_TOKEN=اختياري          # لاستطلاعات الرسائل النصية
```

### 3. الوصول للتطبيق
- التطبيق الرئيسي: `http://0.0.0.0:5000`
- تسجيل الدخول: اضغط على أيقونة الكرة الأرضية لتبديل اللغات
- اختبار إنشاء الاستطلاع: `/surveys/create`

## كيفية إجراء التغييرات

### إضافة ميزات جديدة
1. **الواجهة الأمامية**: عدّل القوالب في مجلد `/templates/`
2. **منطق الخلفية**: أضف routes في `app.py` للميزات البسيطة، `/api/` للمعقدة
3. **الترجمات**: حديث كلاً من `/translations/ar.json` و `/translations/en.json`
4. **قاعدة البيانات**: عدّل النماذج في `models_unified.py`

### اختبار التغييرات
```bash
# شغّل التطبيق واختبر يدوياً
# تحقق من console المتصفح للأخطاء في JavaScript
# اختبر كلاً من الواجهات العربية والإنجليزية
```

## 📁 بنية المشروع الكاملة

### ملفات التطبيق الأساسية
```
├── 🌟 app.py                          # تطبيق Flask الرئيسي (25+ route)
├── 🚀 main.py                         # نقطة دخول WSGI (Gunicorn)
├── 🗄️ models_unified.py               # نماذج قاعدة البيانات الموحدة
├── ⚙️ config.py                       # إعدادات التطبيق
└── 📋 replit.md                       # توثيق المشروع وتفضيلات المستخدم
```

### 🔧 منطق الأعمال والأدوات المساعدة
```
├── utils/                             # منطق الأعمال الأساسي (7 وحدات)
│   ├── 🧠 simple_arabic_analyzer.py   # محرك تحليل الذكاء الاصطناعي (GPT-4o)
│   ├── 🌐 language_manager.py         # متحكم النظام ثنائي اللغة
│   ├── 📊 analytics_helpers.py        # معالجة بيانات لوحة المعلومات
│   ├── 📧 email_handler.py            # التوزيع متعدد القنوات
│   ├── 📱 sms_handler.py              # تكامل الرسائل النصية/واتساب
│   ├── 🔐 security_validators.py      # التحقق من صحة الإدخال والحماية
│   └── 🎯 survey_logic.py             # إنشاء وإدارة الاستطلاعات
```

### 🔗 بنية API والمسارات
```
├── api/                               # مخططات RESTful API
│   ├── 📈 analytics_api.py            # نقاط نهاية التحليلات المباشرة
│   ├── 📊 simplified_dashboard_api.py # بيانات لوحة مؤشرات الأداء الرئيسية
│   ├── 🧪 enhanced_analytics_api.py   # تحليل النصوص المتقدم
│   ├── 📋 professional_reports_api.py # التصدير والتقارير
│   └── 💬 feedback_widget_api.py      # تكامل الودجت
├── routes/                            # مسارات Flask (منظمة حسب الميزة)
│   ├── 📝 surveys_routes.py           # إدارة الاستطلاعات
│   ├── 📞 contact_routes.py           # إدارة جهات الاتصال
│   ├── 🔧 integration_routes.py       # التكاملات الخارجية
│   └── 👤 user_routes.py              # إدارة المستخدمين
```

### 🎨 الواجهة الأمامية ومكونات واجهة المستخدم
```
├── templates/                         # قوالب Jinja2 (25+ صفحة)
│   ├── 🏠 index_simple.html           # لوحة معلومات الصفحة الرئيسية
│   ├── 📝 surveys/                    # مجموعة إدارة الاستطلاعات
│   │   ├── surveys.html               # قائمة ونظرة عامة على الاستطلاعات
│   │   ├── create.html                # واجهة منشئ الاستطلاعات
│   │   └── distribution/              # التوزيع متعدد القنوات
│   ├── 📊 analytics/                  # لوحات معلومات التحليلات
│   │   ├── dashboard.html             # لوحة مؤشرات الأداء الرئيسية
│   │   ├── enhanced.html              # التحليلات المتقدمة
│   │   └── reports.html               # التقارير المهنية
│   ├── 🔗 integrations/               # كتالوج التكاملات
│   └── components/                    # مكونات واجهة المستخدم القابلة لإعادة الاستخدام
│       ├── unified_navigation.html    # التنقل الرئيسي
│       ├── feedback_widget.html       # ودجت التعليقات المستمر
│       ├── scripts.html               # محمل JavaScript
│       └── head.html                  # علامات Meta والموارد
```

### 🎭 الأصول الثابتة والتنسيق
```
├── static/                            # أصول الواجهة الأمامية
│   ├── css/                           # نظام التصميم الموحد
│   │   ├── unified-layout.css         # نظام التخطيط
│   │   ├── design-system.css          # رموز التصميم والمكونات
│   │   └── drag_enhancements.css      # تجربة المستخدم لمنشئ الاستطلاعات
│   ├── js/                            # الوظائف التفاعلية
│   │   ├── main.js                    # منطق المنصة الأساسي
│   │   ├── translations.js            # النظام ثنائي اللغة
│   │   ├── survey_builder.js          # منشئ السحب والإفلات
│   │   ├── feedback-widget.js         # وظائف الودجت
│   │   └── advanced_drag_controller.js # ميزات تجربة المستخدم المحسنة
│   └── assets/                        # الصور وملفات الوسائط
```

### 🌍 التوطين والترجمة
```
├── translations/                      # نظام ثنائي اللغة كامل
│   ├── ar.json                        # الترجمات العربية (500+ مفتاح)
│   ├── en.json                        # الترجمات الإنجليزية (500+ مفتاح)
│   └── utils/                         # أدوات الترجمة
```

### 🔐 المصادقة والأمان
```
├── auth/                              # مصادقة المؤسسات
│   ├── replit_oauth.py                # تنفيذ OAuth 2.0 + PKCE
│   ├── session_manager.py             # إدارة الجلسات
│   └── permissions.py                 # التحكم في الوصول القائم على الأدوار
```

### 🧪 الاختبار وضمان الجودة
```
├── tests/                             # مجموعة اختبارات شاملة
│   ├── test_api/                      # اختبار نقاط نهاية API
│   ├── test_analytics/                # اختبار منطق التحليلات
│   ├── test_auth/                     # اختبار المصادقة
│   ├── test_integration/              # اختبار التكامل
│   └── test_ui/                       # اختبار الواجهة الأمامية
├── tools/                             # أدوات التطوير
│   └── code_quality/                  # فحوصات التدقيق والجودة
```

### 📊 التحليلات ومعالجة البيانات
```
├── analytics/                         # محرك التحليلات
│   ├── processors/                    # وحدات معالجة البيانات
│   ├── aggregators/                   # تجميع المقاييس
│   └── exporters/                     # إنتاج التقارير
```

### 🚀 النشر والعمليات
```
├── deployment/                        # نشر الإنتاج
│   ├── environments/                  # إعدادات البيئة
│   ├── scripts/                       # أتمتة النشر
│   └── monitoring/                    # مراقبة الأداء
├── workflows/                         # سير العمل المؤتمت
└── scripts/                           # نصوص الأدوات المساعدة
```

### 📚 التوثيق
```
├── docs/                              # التوثيق التقني
│   ├── api/                           # توثيق API
│   ├── deployment/                    # أدلة النشر
│   ├── user_guides/                   # أدلة المستخدم (عربي/إنجليزي)
│   └── development/                   # أدلة المطورين
├── README.md                          # التوثيق الإنجليزي
├── README_ARABIC.md                   # التوثيق العربي
└── replit.md                          # سياق المشروع والتفضيلات
```

## 🔥 الميزات الرئيسية للمنصة

### 🎯 مجموعة إدارة الاستطلاعات
- **منشئ السحب والإفلات التفاعلي**: إنشاء الاستطلاعات بصرياً مع 12+ نوع من الأسئلة
- **التوزيع متعدد القنوات**: البريد الإلكتروني، الرسائل النصية، روابط الويب، رموز QR، والودجت القابلة للتضمين
- **تتبع الاستجابات في الوقت الفعلي**: مراقبة مباشرة مع تحليلات الإكمال
- **تدفق المنطق المتقدم**: التفرع الشرطي، وأنماط التخطي، والتخصيص

### 🧠 محرك التحليلات المدعوم بالذكاء الاصطناعي
- **تكامل GPT-4o**: تحليل المشاعر المتقدم بدقة تزيد عن 95% للنصوص العربية
- **الوعي بالسياق الثقافي**: فهم اللهجات العربية الشامية والفروق الثقافية
- **الرؤى التنبؤية**: أنظمة الإنذار المبكر وخوارزميات اكتشاف الفرص
- **التقارير المهنية**: إنتاج PDF تلقائي مع ملخصات تنفيذية

### 📊 نظام لوحة المعلومات التنفيذية
- **مؤشرات الأداء الرئيسية في الوقت الفعلي**: تتبع CSAT و NPS و CES ومعدل الإكمال
- **الرؤى القابلة للتنفيذ**: رسم خرائط الرحلة مع تحديد نقاط الألم
- **مراقبة الأداء**: فعالية القنوات ومقاييس جودة الاستجابة
- **قدرات التصدير**: CSV و PDF وتكامل API للأنظمة الخارجية

### 🔗 التكاملات المؤسسية
- **كتالوج API**: 12+ تكامل جاهز (CRM، منصات البريد الإلكتروني، أدوات التحليلات)
- **أمان OAuth**: مصادقة على مستوى المؤسسات مع صلاحيات قائمة على الأدوار
- **دعم Webhook**: مزامنة البيانات في الوقت الفعلي مع الأنظمة الخارجية
- **نقاط نهاية مخصصة**: RESTful API للتكاملات المخصصة والاتصالات من طرف ثالث

### 🌍 التميز ثنائي اللغة
- **نظام ترجمة كامل**: 500+ عنصر واجهة مستخدم مترجم بكلا اللغتين
- **دعم RTL/LTR**: تبديل التخطيط التلقائي بناءً على اختيار اللغة
- **التوطين الثقافي**: تنسيقات التاريخ، وأنظمة الأرقام، والتفضيلات الثقافية
- **استمرارية الجلسة**: الحفاظ على تفضيلات اللغة عبر جلسات المستخدم

## ⚡ المواصفات التقنية

### الأداء وقابلية التوسع
- **وقت الاستجابة**: متوسط وقت تحميل الصفحة أقل من 200 مللي ثانية
- **المستخدمون المتزامنون**: يدعم 1000+ مستخدم متزامن
- **تحسين قاعدة البيانات**: استعلامات مفهرسة مع تجميع الاتصالات
- **التوسع التلقائي**: تخصيص الموارد الديناميكي بناءً على الطلب

### ميزات الأمان
- **التحقق من صحة الإدخال**: تطهير شامل يمنع هجمات XSS والحقن
- **إدارة الجلسات**: مصادقة آمنة قائمة على الرموز مع انتهاء صلاحية تلقائي
- **تشفير البيانات**: TLS 1.3 للبيانات أثناء النقل، AES-256 للبيانات الحساسة في الراحة
- **سجل المراجعة**: تتبع كامل للأنشطة للامتثال ومراقبة الأمان

### توافق المتصفحات
- **المتصفحات الحديثة**: Chrome 90+، Firefox 88+، Safari 14+، Edge 90+
- **استجابة الجوال**: ميزات تطبيق الويب التقدمي مع قدرات العمل دون اتصال
- **إمكانية الوصول**: امتثال WCAG 2.1 AA مع دعم قارئ الشاشة
- **متعدد المنصات**: تجربة متسقة عبر سطح المكتب والجهاز اللوحي والجوال

## 🛠️ سير عمل التطوير

### إعداد البيئة
```bash
# استنساخ وإعداد (على Replit)
git clone <repository-url>
cd voice-of-customer-platform

# تثبيت التبعيات (تلقائي على Replit)
pip install -r requirements.txt

# تعيين متغيرات البيئة في Replit Secrets
OPENAI_API_KEY=your-key
SESSION_SECRET=your-secret
DATABASE_URL=auto-configured
```

### أوامر التطوير
```bash
# بدء خادم التطوير
python main.py

# تشغيل الاختبارات
pytest tests/ -v

# فحوصات جودة الكود
flake8 . --max-line-length=88
black . --check

# ترحيل قاعدة البيانات (إذا لزم الأمر)
flask db upgrade
```

## المهام التطويرية الشائعة

### إضافة صفحة جديدة
1. أنشئ قالب في `/templates/your_page.html`
2. أضف route في `app.py`:
```python
@app.route('/your-page')
def your_page():
    return render_template('your_page.html')
```
3. أضف رابط التنقل في `/templates/components/unified_navigation.html`
4. أضف الترجمات إلى ملفي اللغة

### إضافة نص ترجمة جديد
1. عدّل `/translations/ar.json` و `/translations/en.json`
2. استخدم في القوالب: `{{ 'your.translation.key' | translate }}`
3. اختبر أن تبديل اللغة يعمل

### تعديل قاعدة البيانات
1. عدّل النماذج في `models_unified.py`
2. قاعدة البيانات تنشئ الجداول تلقائياً عند إعادة التشغيل
3. للتغييرات المعقدة، فكر في migration البيانات

## نظرة عامة على البنية

**الواجهة الأمامية**: قوالب Jinja2 مع Bootstrap CSS، دعم ثنائي اللغة
**الخلفية**: Flask مع نهج مختلط - routes بسيطة للميزات الأساسية، API blueprints للتحليلات المعقدة
**قاعدة البيانات**: PostgreSQL مع تحسين النص العربي
**الذكاء الاصطناعي**: تكامل OpenAI GPT-4o لتحليل المشاعر العربية
**المصادقة**: Replit OAuth (تلقائي في بيئة Replit)

### كيف يعمل النظام ثنائي اللغة
- لغة المستخدم محفوظة في جلسة Flask
- `/utils/language_manager.py` يتعامل مع اكتشاف اللغة والتبديل
- القوالب تستخدم `{{ 'key' | translate }}` لجميع النصوص
- JavaScript يتزامن مع حالة اللغة في الخادم
- اضغط أيقونة الكرة الأرضية في التنقل لتبديل اللغات

## المشاكل الشائعة والحلول

### اللغة لا تتبدل
- تحقق من console المتصفح لأخطاء JavaScript
- تأكد من وجود الترجمات في كلا `/translations/ar.json` و `/translations/en.json`
- امسح cache المتصفح وأعد التحميل

### أخطاء قاعدة البيانات
- قاعدة البيانات تعيد الإنشاء تلقائياً عند إعادة التشغيل
- تحقق من `models_unified.py` لتعريفات النماذج
- متغير البيئة `DATABASE_URL` يوفر تلقائياً بواسطة Replit

### تحليل الذكاء الاصطناعي لا يعمل
- تأكد من تعيين `OPENAI_API_KEY` في Replit Secrets
- تحقق من `/utils/simple_arabic_analyzer.py` لسجلات الأخطاء
- اختبر بنص عربي بسيط أولاً

### مشاكل التنسيق
- CSS الرئيسي في `/static/css/unified-layout.css`
- Bootstrap RTL CSS يحمّل تلقائياً للعربية
- استخدم أدوات تطوير المتصفح لتنقيح تعارضات CSS

## النشر

**التطوير**: فقط اضغط "Run" في Replit
**الإنتاج**: استخدم نشر Replit (اضغط زر Deploy)

التطبيق محسّن لبيئة Replit ويتعامل مع معالجة النص العربي تلقائياً.

## الحصول على المساعدة

1. تحقق من هذا README أولاً
2. انظر إلى كود مشابه موجود في التطبيق
3. اختبر التغييرات في خطوات صغيرة
4. استخدم أدوات تطوير المتصفح لتنقيح الواجهة الأمامية

## ما يجعل هذا التطبيق مميزاً

- **دعم عربي أصلي**: واجهة RTL كاملة مع معالجة نص صحيحة
- **ثنائي اللغة**: تبديل سلس بين العربية والإنجليزية في كل مكان
- **مدعوم بالذكاء الاصطناعي**: يفهم اللهجات العربية والسياق الثقافي
- **متعدد القنوات**: استطلاعات عبر الويب، البريد الإلكتروني، الرسائل النصية، رموز QR
- **الوقت الفعلي**: تحليلات مباشرة وتحديثات لوحة المعلومات

## لأصحاب المصلحة

هذه المنصة تساعد الشركات في الأسواق العربية على فهم عملائها بشكل أفضل من خلال:
- إنشاء وتوزيع استطلاعات احترافية
- تحليل مدعوم بالذكاء الاصطناعي للتعليقات العربية
- لوحات معلومات في الوقت الفعلي تظهر اتجاهات رضا العملاء
- توصيل متعدد القنوات يضمن وصولاً واسعاً

التكنولوجيا حديثة وقابلة للتوسع ومصممة خصيصاً للأسواق الناطقة بالعربية.